import{_ as M,p as c,h as N,v as V,c as r,o as u,j as e,e as D,aj as v,ak as x,ag as w,al as z,t as s,F as _,B as k,n as S,a as W,d as L,G as $}from"./chunks/framework.ELrfyV9R.js";import{a as O}from"./chunks/index.Dq7h7Pqt.js";const F={class:"polymarket-container"},H={class:"search-form"},j={class:"form-group"},G={class:"form-group"},Y={class:"form-group"},q={class:"form-group"},J={class:"form-group"},K={class:"form-group"},Q={class:"button-group"},X=["disabled"],Z={key:0,class:"error"},ee={key:1,class:"loading"},te={key:2,class:"group-summary-container"},ae={class:"group-table"},oe={class:"group-title"},le={class:"group-total"},se={class:"group-total"},ne={class:"result-info"},ie={key:0,class:"response-time"},re={class:"table-container"},ue={__name:"index",setup(P){const o=c({proxyWallet:"0x0d32e5fc366d846bbca8a82c6d60a6dd718b6336",title:"",limit:100,sortDirection:"DESC",type:"TRADE",proxy:""}),C=l=>{console.log(l,"----handleSelectionChange---"),o.value.proxyWallet=l.target.value},p=c([]),m=c(!1),i=c(null);c(!1);const f=c(null),b=N(()=>{console.log("Computing filteredData...");let l=p.value;if(o.value.title){const t=o.value.title.toLowerCase();l=l.filter(a=>a.title&&a.title.toLowerCase().includes(t))}return console.log(l,"----filteredData"),l}),I=l=>/^0x[a-fA-F0-9]{40}$/.test(l),A=async()=>{if(!o.value.proxyWallet){i.value="请输入 ProxyWallet 地址";return}if(!I(o.value.proxyWallet.trim())){i.value=`ProxyWallet 地址格式不正确
应为 0x 开头的 42 位十六进制字符`;return}const l=[5,10,25,50,100,200,500,1e3,1500],t=Number(o.value.limit);if(!Number.isInteger(t)||t<=0||!l.includes(t)){i.value=`limit 值不合法，请选择：${l.join(", ")}`;return}const a=String(o.value.sortDirection).toUpperCase();if(a!=="ASC"&&a!=="DESC"){i.value="sortDirection 必须为 ASC 或 DESC";return}m.value=!0,i.value=null,f.value=null;const d=performance.now();try{const n=await O.get("https://data-api.polymarket.com/activity",{params:{user:o.value.proxyWallet.trim(),limit:t,sortBy:"TIMESTAMP",sortDirection:a,type:o.value.type},timeout:1e4});console.log(n,"-------result--------"),n.data&&Array.isArray(n.data)?p.value=n.data:(p.value=[],i.value="API 返回数据格式不正确")}catch(n){console.error("API 请求失败:",n),n.code==="ECONNABORTED"?i.value="请求超时，请检查网络连接":n.response?i.value=`API 错误 (${n.response.status}): ${n.response.statusText}`:n.request?i.value="无法连接到服务器，请检查网络":i.value=`获取数据失败: ${n.message}`,p.value=[],console.log("使用模拟数据进行测试..."),p.value=U()}finally{m.value=!1,f.value=Math.round(performance.now()-d)}},U=()=>[{proxyWallet:"0x0d32e5fc366d846bbca8a82c6d60a6dd718b6336",timestamp:1731470100,conditionId:"0xf910ea36342df52deb045d3437f6011d0e7d46b9df3326422c7eaa3ccb634d52",type:"TRADE",size:98.039214,usdcSize:48.039215,transactionHash:"0x938a6fa014859e67f6337979dbed9a17e2f18e0ba1ad2e6757718a8dd0faeccd",price:.49000000142800004,asset:"51125716007472132041446136984495310770285780708294404174348029552936651205436",side:"BUY",outcomeIndex:1,title:"Bitcoin Up or Down - November 13, 4:15AM-4:30AM ET",slug:"btc-updown-15m-1763025300",icon:"https://polymarket-upload.s3.us-east-2.amazonaws.com/BTC+fullsize.png",eventSlug:"btc-updown-15m-1763025300",outcome:"Down",name:"0x0D32e5fC366d846BbcA8a82C6D60a6DD718b6336-1761759997574",pseudonym:"Bite-Sized-Turban"},{proxyWallet:"0x0d32e5fc366d846bbca8a82c6d60a6dd718b6336",timestamp:1731469800,conditionId:"0xa820ea36342df52deb045d3437f6011d0e7d46b9df3326422c7eaa3ccb634d88",type:"TRADE",size:150.5,usdcSize:90.3,transactionHash:"0x738b6fa014859e67f6337979dbed9a17e2f18e0ba1ad2e6757718a8dd0faed12",price:.6,asset:"61125716007472132041446136984495310770285780708294404174348029552936651205437",side:"SELL",outcomeIndex:0,title:"Ethereum Price Prediction - November 13",slug:"eth-price-1731469800",icon:"https://polymarket-upload.s3.us-east-2.amazonaws.com/ETH+fullsize.png",eventSlug:"eth-price-1731469800",outcome:"Up",name:"0x0D32e5fC366d846BbcA8a82C6D60a6DD718b6336-1731469800",pseudonym:"Crypto-Trader-Pro"},{proxyWallet:"0x0d32e5fc366d846bbca8a82c6d60a6dd718b6336",timestamp:1731469200,conditionId:"0xb920ea36342df52deb045d3437f6011d0e7d46b9df3326422c7eaa3ccb634d99",type:"TRADE",size:75.25,usdcSize:37.625,transactionHash:"0x838c7fa014859e67f6337979dbed9a17e2f18e0ba1ad2e6757718a8dd0faee23",price:.5,asset:"71125716007472132041446136984495310770285780708294404174348029552936651205438",side:"BUY",outcomeIndex:1,title:"Bitcoin Up or Down - November 13, 3:45AM-4:00AM ET",slug:"btc-updown-15m-1731469200",icon:"https://polymarket-upload.s3.us-east-2.amazonaws.com/BTC+fullsize.png",eventSlug:"btc-updown-15m-1731469200",outcome:"Down",name:"0x0D32e5fC366d846BbcA8a82C6D60a6DD718b6336-1731469200",pseudonym:"Market-Master"}],B=()=>{o.value={proxyWallet:"0x0d32e5fc366d846bbca8a82c6d60a6dd718b6336",title:"",limit:100,sortDirection:"DESC"},p.value=[],i.value=null,f.value=null},y=l=>l==null?"0.00":Number(l).toFixed(2),R=l=>l?new Date(l*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",T=N(()=>{const l=new Map;return console.log(b.value,"----groupedSummaries filteredData"),(b.value||[]).forEach(t=>{const a=t.title||"未命名",d=String(t.outcome||"").trim();if(d!=="Up"&&d!=="Down")return;const n=Number(t.usdcSize)||0,h=Number(t.size)||0,E=`${a}||${d}`,g=l.get(E);g?(g.total+=n,g.size+=h):l.set(E,{title:a,type:d,total:n,size:h})}),Array.from(l.values()).map(t=>({...t,total:Number(t.total),size:Number(t.size)}))});return V(()=>{A()}),(l,t)=>(u(),r("div",F,[t[19]||(t[19]=e("h1",null," 数据查询",-1)),e("div",H,[e("div",j,[t[7]||(t[7]=e("label",null,"代理列表:",-1)),v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.proxy=a),onChange:C},t[6]||(t[6]=[w('<option value="0x161eb16874e34f545991e774b4e1ac5b65f86ef0" data-v-aaf0e425>peter77777-NBA-89.9%-141436</option><option value="0x6ffb4354cbe6e0f9989e3b55564ec5fb8646a834" data-v-aaf0e425>AgricultureSecretary-ALL-91.7%-340893</option><option value="0x522402d9f9b721b5155a6136df3c112200810de8" data-v-aaf0e425>TheFBIAgent-ALL-80.6%-101190</option><option value="0x21deaea5f00c23bfbdf1cc29a700c11e0ccaa8ff" data-v-aaf0e425>PTGE31Cn1-Price-57.9%-11828</option><option value="0xeffcc79a8572940cee2238b44eac89f2c48fda88" data-v-aaf0e425>FirstOrder-Price-56.7%-342477</option><option value="0x5248313731287b61d714ab9df655442d6ed28aa2" data-v-aaf0e425>0x5248313731287b61d714ab9df655442d6ed28aa2-Price-44.3%-$102925</option>',6)]),544),[[x,o.value.proxy]])]),e("div",G,[t[8]||(t[8]=e("label",null,"ProxyWallet:",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.proxyWallet=a),type:"text",placeholder:"输入 proxyWallet 地址"},null,512),[[z,o.value.proxyWallet]])]),e("div",Y,[t[9]||(t[9]=e("label",null,"Title:",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.title=a),type:"text",placeholder:"输入标题关键词"},null,512),[[z,o.value.title]])]),e("div",q,[t[11]||(t[11]=e("label",null,"返回条数 (limit):",-1)),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.limit=a)},t[10]||(t[10]=[e("option",{value:5},"5",-1),e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:200},"200",-1),e("option",{value:500},"500",-1),e("option",{value:1e3},"1000",-1),e("option",{value:1500},"1500",-1)]),512),[[x,o.value.limit,void 0,{number:!0}]])]),e("div",J,[t[13]||(t[13]=e("label",null,"排序方向 (sortDirection):",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.sortDirection=a)},t[12]||(t[12]=[e("option",{value:"DESC"},"降序 (DESC)",-1),e("option",{value:"ASC"},"升序 (ASC)",-1)]),512),[[x,o.value.sortDirection]])]),e("div",K,[t[15]||(t[15]=e("label",null,"交易类型 (type):",-1)),v(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.type=a)},t[14]||(t[14]=[w('<option value="TRADE" data-v-aaf0e425>TRADE (交易)</option><option value="SPLIT" data-v-aaf0e425>SPLIT (拆分)</option><option value="TRADE" data-v-aaf0e425>MERGE (合并)</option><option value="REDEEM" data-v-aaf0e425>REDEEM (赎回/兑换)</option><option value="REWARD" data-v-aaf0e425>REWARD (奖励)</option><option value="CONVERSION" data-v-aaf0e425>CONVERSION (转换)</option>',6)]),512),[[x,o.value.type]])]),e("div",Q,[e("button",{class:"btn-search",onClick:A,disabled:m.value},s(m.value?"查询中...":"查询"),9,X),e("button",{class:"btn-reset",onClick:B},"重置")])]),i.value?(u(),r("div",Z,s(i.value),1)):D("",!0),m.value?(u(),r("div",ee,"正在加载数据...")):D("",!0),T.value.length>0?(u(),r("div",te,[t[17]||(t[17]=e("h2",{class:"group-summary-title"},"按标题分组 — 类型与总计 (USDC)",-1)),e("div",ae,[e("table",null,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",null,"标题"),e("th",null,"类型"),e("th",null,"份额"),e("th",null,"总计 (USDC)")])],-1)),e("tbody",null,[(u(!0),r(_,null,k(T.value,a=>(u(),r("tr",{key:a.title+"::"+a.type},[e("td",oe,s(a.title),1),e("td",{class:S(a.type==="Up"?"group-up":"group-down")},s(a.type),3),e("td",le,s(y(a.size)),1),e("td",se,s(y(a.total)),1)]))),128))])])])])):D("",!0),b.value.length>0?(u(),r(_,{key:3},[e("div",ne,[W(" 共找到 "+s(b.value.length)+" 条记录 ",1),f.value!==null?(u(),r("span",ie," (查询耗时: "+s(f.value)+"ms) ",1)):D("",!0)]),e("div",re,[e("table",null,[t[18]||(t[18]=e("thead",null,[e("tr",null,[e("th",null,"序号"),e("th",null,"时间"),e("th",null,"标题"),e("th",null,"结果"),e("th",null,"类型"),e("th",null,"方向"),e("th",null,"价格"),e("th",null,"数量"),e("th",null,"USDC 数量")])],-1)),e("tbody",null,[(u(!0),r(_,null,k(b.value,(a,d)=>(u(),r("tr",{key:`${a.transactionHash}-${d}`},[e("td",null,s(d+1),1),e("td",null,s(R(a.timestamp)),1),e("td",null,s(a.title),1),e("td",null,[e("span",{class:S(["outcome-badge",a.outcome==="Up"?"outcome-up":"outcome-down"])},s(a.outcome),3)]),e("td",null,s(a.type),1),e("td",{class:S(a.side==="BUY"?"side-buy":"side-sell")},s(a.side),3),e("td",null,s(y(a.price)),1),e("td",null,s(y(a.size)),1),e("td",null,s(y(a.usdcSize)),1)]))),128))])])])],64)):D("",!0)]))}},de=M(ue,[["__scopeId","data-v-aaf0e425"]]),me=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"home"},"headers":[],"relativePath":"polymarket/index.md","filePath":"polymarket/index.md","lastUpdated":1763259695000}'),pe={name:"polymarket/index.md"},fe=L({...pe,setup(P){return(o,C)=>(u(),r("div",null,[$(de)]))}});export{me as __pageData,fe as default};
