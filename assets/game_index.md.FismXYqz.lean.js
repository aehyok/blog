import{_ as Q,p as s,h as J,v as W,x as X,c,o as d,j as e,t as u,ah as Y,ai as Z,F as C,B as z,n as S,N as ee,e as te,d as le,G as ae}from"./chunks/framework.Crtr1jMB.js";const se={class:"app"},oe={class:"stats"},ue={class:"stat-item"},re={class:"stat-value"},ve={class:"stat-item"},ne={class:"stat-value timer"},ie={class:"stat-item"},ce={class:"stat-value"},de={class:"controls"},me={class:"control-row"},he={class:"grid-size-selector"},ge=["disabled"],fe=["value"],_e={class:"control-row"},pe=["disabled"],Se={class:"control-row"},be=["onClick"],ye={key:0,style:{"margin-top":"10px"}},we={class:"history-time"},ke={__name:"shuerte",setup(O){const D=[{value:1,label:"1×1 (1格)"},{value:2,label:"2×2 (4格)"},{value:3,label:"3×3 (9格)"},{value:4,label:"4×4 (16格)"},{value:5,label:"5×5 (25格)"},{value:6,label:"6×6 (36格)"},{value:7,label:"7×7 (49格)"}],o=s(5),F=s([]),f=s(1),I=s([]),v=s(!1),_=s(!1),G=s(0),y=s(0),p=s(0),i=s(null),m=s([]),n=s(null),b=s([]),$=s(!1),N=s(!1),H=s(""),w=s(!1),h=s(!0),g=s(!0),M=J(()=>o.value*o.value),U=J(()=>[...m.value].reverse()),j=()=>{const t=Array.from({length:M.value},(l,a)=>a+1);for(let l=t.length-1;l>0;l--){const a=Math.floor(Math.random()*(l+1));[t[l],t[a]]=[t[a],t[l]]}return t},P=()=>{V(),T()},T=()=>{F.value=j(),B()},B=()=>{f.value=1,I.value=[],v.value=!1,_.value=!1,y.value=0,p.value=0,b.value=[],$.value=!1,w.value=!1,n.value&&(clearInterval(n.value),n.value=null)},R=(t,l)=>{_.value||(!v.value&&t===1&&(v.value=!0,G.value=Date.now(),A()),v.value&&t===f.value?(I.value.push(t),f.value++,f.value>M.value&&L()):v.value?E(`请点击数字 ${f.value}`,l):!v.value&&t!==1&&E("请先点击数字 1 开始游戏",l))},E=(t,l)=>{H.value=t,N.value=!0,b.value.push(l),setTimeout(()=>{N.value=!1},2e3),setTimeout(()=>{b.value=b.value.filter(a=>a!==l)},500)},A=()=>{n.value=setInterval(()=>{y.value=Date.now()-G.value},10)},L=()=>{if(_.value=!0,p.value=y.value,w.value=!i.value||p.value<i.value,w.value){i.value=p.value;try{localStorage.setItem(`schulte-best-time-${o.value}x${o.value}`,i.value.toString())}catch(t){console.error("Failed to save best time:",t)}}m.value.push({time:p.value,date:new Date});try{localStorage.setItem(`schulte-history-${o.value}x${o.value}`,JSON.stringify(m.value))}catch(t){console.error("Failed to save history:",t)}n.value&&(clearInterval(n.value),n.value=null),$.value=!0},q=()=>{h.value=!h.value;try{localStorage.setItem("schulte-show-clicked",h.value.toString())}catch(t){console.error("Failed to save setting:",t)}},K=()=>{g.value=!g.value;try{localStorage.setItem("schulte-show-hover",g.value.toString())}catch(t){console.error("Failed to save setting:",t)}},k=t=>{if(!t)return"00:00.00";const l=Math.floor(t%1e3/10),a=Math.floor(t/1e3)%60;return`${Math.floor(t/6e4).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}.${l.toString().padStart(2,"0")}`},V=()=>{try{const t=localStorage.getItem(`schulte-best-time-${o.value}x${o.value}`);t?i.value=parseInt(t):i.value=null;const l=localStorage.getItem(`schulte-history-${o.value}x${o.value}`);l?m.value=JSON.parse(l):m.value=[];const a=localStorage.getItem("schulte-show-clicked");a!==null&&(h.value=a==="true");const r=localStorage.getItem("schulte-show-hover");r!==null&&(g.value=r==="true");const x=localStorage.getItem("schulte-grid-size");x&&(o.value=parseInt(x))}catch(t){console.error("Failed to load saved data:",t)}};return W(()=>{V(),T()}),X(()=>{n.value&&clearInterval(n.value)}),(t,l)=>(d(),c(C,null,[e("div",se,[l[6]||(l[6]=e("h1",null,"舒尔特表格训练器",-1)),e("div",oe,[e("div",ue,[l[1]||(l[1]=e("div",{class:"stat-label"},"当前进度",-1)),e("div",re,u(f.value-1)+"/"+u(M.value),1)]),e("div",ve,[l[2]||(l[2]=e("div",{class:"stat-label"},"计时",-1)),e("div",ne,u(k(y.value)),1)]),e("div",ie,[l[3]||(l[3]=e("div",{class:"stat-label"},"最佳成绩",-1)),e("div",ce,u(i.value?k(i.value):"--:--"),1)])]),e("div",de,[e("div",me,[e("div",he,[l[4]||(l[4]=e("label",{for:"gridSize"},"网格尺寸:",-1)),Y(e("select",{id:"gridSize","onUpdate:modelValue":l[0]||(l[0]=a=>o.value=a),onChange:P,disabled:v.value&&!_.value},[(d(),c(C,null,z(D,a=>e("option",{key:a.value,value:a.value},u(a.label),9,fe)),64))],40,ge),[[Z,o.value]])])]),e("div",_e,[e("button",{class:"start-btn",disabled:v.value&&!_.value,onClick:T},u(v.value&&!_.value?"游戏进行中":"开始新游戏"),9,pe),e("button",{class:"reset-btn",onClick:B},"重置")]),e("div",Se,[e("button",{class:S(["toggle-btn",{active:h.value}]),onClick:q},u(h.value?"隐藏已点":"显示已点"),3),e("button",{class:S(["toggle-btn hover-toggle",{active:g.value}]),onClick:K},u(g.value?"隐藏悬停":"显示悬停"),3)])]),e("div",{class:"grid",style:ee({gridTemplateColumns:`repeat(${o.value}, 1fr)`})},[(d(!0),c(C,null,z(F.value,(a,r)=>(d(),c("div",{key:r,class:S(["cell",{clicked:h.value&&I.value.includes(a),error:b.value.includes(r),"no-hover":!g.value}]),onClick:x=>R(a,r)},u(a),11,be))),128))],4),e("div",{class:S(["completion-message",{show:$.value}])},[l[5]||(l[5]=e("div",{class:"completion-title"},"🎉 恭喜完成！",-1)),e("div",null,"完成时间: "+u(k(p.value)),1),w.value?(d(),c("div",ye,"🏆 新的最佳记录！")):te("",!0)],2),e("div",{class:S(["history",{show:m.value.length>0}])},[e("h3",null,"历史记录 ("+u(o.value)+"×"+u(o.value)+")",1),e("div",null,[(d(!0),c(C,null,z(U.value,(a,r)=>(d(),c("div",{key:r,class:"history-item"},[e("span",null,"第 "+u(m.value.length-r)+" 次",1),e("span",we,u(k(a.time)),1)]))),128))])],2)]),e("div",{class:S(["error-message",{show:N.value}])},u(H.value),3)],64))}},Ce=Q(ke,[["__scopeId","data-v-4a2684fc"]]),Ne=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"game/index.md","filePath":"game/index.md","lastUpdated":1748484121000}'),Ie={name:"game/index.md"},Me=le({...Ie,setup(O){return(D,o)=>(d(),c("div",null,[ae(Ce)]))}});export{Ne as __pageData,Me as default};
