import{_ as H,p as g,h as F,v as ee,x as te,c as m,o as h,j as e,t as d,ah as se,ai as le,F as P,B as x,n as S,N as $,e as N,a as R,d as ae,aj as ne,J as oe,b as B}from"./chunks/framework.Crtr1jMB.js";const ie={class:"app"},re={class:"stats"},ue={class:"stat-item"},ce={class:"stat-value"},de={class:"stat-item"},ve={class:"stat-value timer"},ge={class:"stat-item"},he={class:"stat-value"},me={class:"controls"},fe={class:"control-row"},pe={class:"grid-size-selector"},_e=["disabled"],ye=["value"],be={class:"control-row"},we=["disabled"],Se={class:"control-row"},ke=["onClick"],De={key:0,style:{"margin-top":"10px"}},Ce={class:"history-time"},Pe={__name:"shuerte",setup(i){const t=[{value:1,label:"1×1 (1格)"},{value:2,label:"2×2 (4格)"},{value:3,label:"3×3 (9格)"},{value:4,label:"4×4 (16格)"},{value:5,label:"5×5 (25格)"},{value:6,label:"6×6 (36格)"},{value:7,label:"7×7 (49格)"}],n=g(5),f=g([]),o=g(1),r=g([]),s=g(!1),u=g(!1),v=g(0),y=g(0),b=g(0),w=g(null),k=g([]),_=g(null),L=g([]),T=g(!1),A=g(!1),j=g(""),I=g(!1),D=g(!0),C=g(!0),G=F(()=>n.value*n.value),J=F(()=>[...k.value].reverse()),V=()=>{const l=Array.from({length:G.value},(a,c)=>c+1);for(let a=l.length-1;a>0;a--){const c=Math.floor(Math.random()*(a+1));[l[a],l[c]]=[l[c],l[a]]}return l},q=()=>{U(),O()},O=()=>{f.value=V(),E()},E=()=>{o.value=1,r.value=[],s.value=!1,u.value=!1,y.value=0,b.value=0,L.value=[],T.value=!1,I.value=!1,_.value&&(clearInterval(_.value),_.value=null)},K=(l,a)=>{u.value||(!s.value&&l===1&&(s.value=!0,v.value=Date.now(),Q()),s.value&&l===o.value?(r.value.push(l),o.value++,o.value>G.value&&W()):s.value?z(`请点击数字 ${o.value}`,a):!s.value&&l!==1&&z("请先点击数字 1 开始游戏",a))},z=(l,a)=>{j.value=l,A.value=!0,L.value.push(a),setTimeout(()=>{A.value=!1},2e3),setTimeout(()=>{L.value=L.value.filter(c=>c!==a)},500)},Q=()=>{_.value=setInterval(()=>{y.value=Date.now()-v.value},10)},W=()=>{if(u.value=!0,b.value=y.value,I.value=!w.value||b.value<w.value,I.value){w.value=b.value;try{localStorage.setItem(`schulte-best-time-${n.value}x${n.value}`,w.value.toString())}catch(l){console.error("Failed to save best time:",l)}}k.value.push({time:b.value,date:new Date});try{localStorage.setItem(`schulte-history-${n.value}x${n.value}`,JSON.stringify(k.value))}catch(l){console.error("Failed to save history:",l)}_.value&&(clearInterval(_.value),_.value=null),T.value=!0},X=()=>{D.value=!D.value;try{localStorage.setItem("schulte-show-clicked",D.value.toString())}catch(l){console.error("Failed to save setting:",l)}},Y=()=>{C.value=!C.value;try{localStorage.setItem("schulte-show-hover",C.value.toString())}catch(l){console.error("Failed to save setting:",l)}},M=l=>{if(!l)return"00:00.00";const a=Math.floor(l%1e3/10),c=Math.floor(l/1e3)%60;return`${Math.floor(l/6e4).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${a.toString().padStart(2,"0")}`},U=()=>{try{const l=localStorage.getItem(`schulte-best-time-${n.value}x${n.value}`);l?w.value=parseInt(l):w.value=null;const a=localStorage.getItem(`schulte-history-${n.value}x${n.value}`);a?k.value=JSON.parse(a):k.value=[];const c=localStorage.getItem("schulte-show-clicked");c!==null&&(D.value=c==="true");const p=localStorage.getItem("schulte-show-hover");p!==null&&(C.value=p==="true");const Z=localStorage.getItem("schulte-grid-size");Z&&(n.value=parseInt(Z))}catch(l){console.error("Failed to load saved data:",l)}};return ee(()=>{U(),O()}),te(()=>{_.value&&clearInterval(_.value)}),(l,a)=>(h(),m(P,null,[e("div",ie,[a[6]||(a[6]=e("h1",null,"舒尔特表格训练器",-1)),e("div",re,[e("div",ue,[a[1]||(a[1]=e("div",{class:"stat-label"},"当前进度",-1)),e("div",ce,d(o.value-1)+"/"+d(G.value),1)]),e("div",de,[a[2]||(a[2]=e("div",{class:"stat-label"},"计时",-1)),e("div",ve,d(M(y.value)),1)]),e("div",ge,[a[3]||(a[3]=e("div",{class:"stat-label"},"最佳成绩",-1)),e("div",he,d(w.value?M(w.value):"--:--"),1)])]),e("div",me,[e("div",fe,[e("div",pe,[a[4]||(a[4]=e("label",{for:"gridSize"},"网格尺寸:",-1)),se(e("select",{id:"gridSize","onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),onChange:q,disabled:s.value&&!u.value},[(h(),m(P,null,x(t,c=>e("option",{key:c.value,value:c.value},d(c.label),9,ye)),64))],40,_e),[[le,n.value]])])]),e("div",be,[e("button",{class:"start-btn",disabled:s.value&&!u.value,onClick:O},d(s.value&&!u.value?"游戏进行中":"开始新游戏"),9,we),e("button",{class:"reset-btn",onClick:E},"重置")]),e("div",Se,[e("button",{class:S(["toggle-btn",{active:D.value}]),onClick:X},d(D.value?"隐藏已点":"显示已点"),3),e("button",{class:S(["toggle-btn hover-toggle",{active:C.value}]),onClick:Y},d(C.value?"隐藏悬停":"显示悬停"),3)])]),e("div",{class:"grid",style:$({gridTemplateColumns:`repeat(${n.value}, 1fr)`})},[(h(!0),m(P,null,x(f.value,(c,p)=>(h(),m("div",{key:p,class:S(["cell",{clicked:D.value&&r.value.includes(c),error:L.value.includes(p),"no-hover":!C.value}]),onClick:Z=>K(c,p)},d(c),11,ke))),128))],4),e("div",{class:S(["completion-message",{show:T.value}])},[a[5]||(a[5]=e("div",{class:"completion-title"},"🎉 恭喜完成！",-1)),e("div",null,"完成时间: "+d(M(b.value)),1),I.value?(h(),m("div",De,"🏆 新的最佳记录！")):N("",!0)],2),e("div",{class:S(["history",{show:k.value.length>0}])},[e("h3",null,"历史记录 ("+d(n.value)+"×"+d(n.value)+")",1),e("div",null,[(h(!0),m(P,null,x(J.value,(c,p)=>(h(),m("div",{key:p,class:"history-item"},[e("span",null,"第 "+d(k.value.length-p)+" 次",1),e("span",Ce,d(M(c.time)),1)]))),128))])],2)]),e("div",{class:S(["error-message",{show:A.value}])},d(j.value),3)],64))}},xe=H(Pe,[["__scopeId","data-v-4a2684fc"]]),Le={name:"PinyinGame",data(){return{currentLevel:1,score:0,dropZones:["","","",""],selectedPiece:null,draggingIndex:null,dragOverIndex:null,showSuccessAnimation:!1,confettiList:[],availablePieces:[],levels:[{word:"苹果",pinyin:"píng guǒ",answer:["p","íng","g","uǒ"],emoji:"🍎",pieces:["p","íng","uǒ","g","b","ā","m","ì"]},{word:"小猫",pinyin:"xiǎo māo",answer:["x","iǎo","m","āo"],emoji:"🐱",pieces:["x","iǎo","āo","m","d","ù","l","ǐ"]},{word:"太阳",pinyin:"tài yáng",answer:["t","ài","y","áng"],emoji:"☀️",pieces:["t","ài","áng","y","h","ē","w","ú"]},{word:"月亮",pinyin:"yuè liàng",answer:["y","uè","l","iàng"],emoji:"🌙",pieces:["y","uè","iàng","l","s","ǐ","n","ǚ"]},{word:"花朵",pinyin:"huā duǒ",answer:["h","uā","d","uǒ"],emoji:"🌸",pieces:["h","uā","uǒ","d","k","ě","z","ī"]}]}},computed:{currentLevelData(){return this.levels[(this.currentLevel-1)%this.levels.length]}},mounted(){this.initGame()},methods:{initGame(){this.loadLevel()},loadLevel(){this.dropZones=["","","",""],this.selectedPiece=null,this.generatePieces()},generatePieces(){const i=[...this.currentLevelData.pieces].sort(()=>Math.random()-.5);this.availablePieces=i.map(t=>({text:t,used:!1}))},isVowel(i){return["ā","á","ǎ","à","ē","é","ě","è","ī","í","ǐ","ì","ō","ó","ǒ","ò","ū","ú","ǔ","ù","ǚ","ǘ","ǜ","ǖ","āi","ái","ǎi","ài","ēi","éi","ěi","èi","āo","áo","ǎo","ào","ōu","óu","ǒu","òu","ān","án","ǎn","àn","ēn","én","ěn","èn","īn","ín","ǐn","ìn","ūn","ún","ǔn","ùn","āng","áng","ǎng","àng","ēng","éng","ěng","èng","īng","íng","ǐng","ìng","ōng","óng","ǒng","òng","uā","uá","uǎ","uà","uō","uó","uǒ","uò","uāi","uái","uǎi","uài","uēi","uéi","uěi","uèi","uān","uán","uǎn","uàn","uēn","uén","uěn","uèn","uāng","uáng","uǎng","uàng","uēng","uéng","uěng","uèng","iā","iá","iǎ","ià","iāo","iáo","iǎo","iào","iōu","ióu","iǒu","iòu","iān","ián","iǎn","iàn","iāng","iáng","iǎng","iàng","iōng","ióng","iǒng","iòng"].some(n=>i.includes(n.replace(/[āáǎàēéěèīíǐìōóǒòūúǔùǚǘǜǖ]/g,f=>f))||i.includes(n))},handleDragStart(i,t){i.dataTransfer.setData("text/plain",this.availablePieces[t].text),this.draggingIndex=t},handleDragOver(i,t){i.preventDefault(),this.dragOverIndex=t},handleDrop(i,t){i.preventDefault();const n=i.dataTransfer.getData("text/plain");if(this.dropZones[t]===""){this.dropZones.splice(t,1,n);const f=this.availablePieces.findIndex(o=>o.text===n&&!o.used);f!==-1&&(this.availablePieces[f].used=!0),this.playSound("place")}this.dragOverIndex=null},handleDragEnd(){this.draggingIndex=null,this.dragOverIndex=null},handlePieceClick(i,t){this.availablePieces[t].used||(this.selectedPiece=this.selectedPiece===i?null:i)},handleDropZoneClick(i){if(this.selectedPiece&&this.dropZones[i]===""){this.dropZones.splice(i,1,this.selectedPiece);const t=this.availablePieces.findIndex(n=>n.text===this.selectedPiece&&!n.used);t!==-1&&(this.availablePieces[t].used=!0),this.selectedPiece=null,this.playSound("place")}},checkAnswer(){JSON.stringify(this.dropZones)===JSON.stringify(this.currentLevelData.answer)?(this.score+=100,this.showSuccess(),this.playSound("success"),setTimeout(()=>{this.nextLevel()},2e3)):(alert("再试试看！检查一下拼音是否正确哦 😊"),this.playSound("error"))},nextLevel(){this.currentLevel++,this.currentLevel>this.levels.length&&(alert(`恭喜你完成了所有关卡！
总得分: ${this.score}分
🎉🎉🎉`),this.currentLevel=1,this.score=0),this.loadLevel()},resetGame(){this.currentLevel=1,this.score=0,this.loadLevel()},showSuccess(){this.showSuccessAnimation=!0,setTimeout(()=>{this.showSuccessAnimation=!1},1e3),this.createConfetti()},createConfetti(){const i=["#4299e1","#38a169","#ed8936","#9f40ba","#f56565"];for(let t=0;t<50;t++){const n={id:Date.now()+t,style:{left:Math.random()*100+"%",background:i[Math.floor(Math.random()*i.length)],animationDelay:Math.random()*3+"s",animationDuration:Math.random()*3+2+"s"}};this.confettiList.push(n),setTimeout(()=>{const f=this.confettiList.findIndex(o=>o.id===n.id);f!==-1&&this.confettiList.splice(f,1)},5e3)}},playSound(i){console.log(`Playing ${i} sound`)}}},Ie={class:"game-container"},Me={class:"header"},Ne={class:"score"},Te={class:"game-area"},Ae={class:"target-area"},Ge={class:"target-image"},Oe={class:"drop-zones"},Ze=["onDragover","onDrop","onClick"],$e={class:"pieces-area"},je=["draggable","onDragstart","onClick"],Ee={class:"controls"},ze={key:0,class:"success-animation"},Ue={class:"celebration"};function Fe(i,t,n,f,o,r){return h(),m("div",Ie,[e("div",Me,[t[6]||(t[6]=e("h1",{class:"title"},"🧩 声母韵母拼装游戏",-1)),e("div",Ne,[t[4]||(t[4]=R("得分: ")),e("span",null,d(o.score),1),t[5]||(t[5]=R(" | 关卡: ")),e("span",null,d(o.currentLevel),1)])]),e("div",Te,[e("div",Ae,[t[7]||(t[7]=e("div",{class:"target-word"},"拼出下面的拼音:",-1)),e("div",Ge,d(r.currentLevelData.emoji),1),e("div",null,d(r.currentLevelData.pinyin)+" ("+d(r.currentLevelData.word)+")",1),e("div",Oe,[(h(!0),m(P,null,x(o.dropZones,(s,u)=>(h(),m("div",{key:u,class:S(["drop-zone",{"drag-over":o.dragOverIndex===u,filled:s!=="",clickable:o.selectedPiece&&s===""}]),onDragover:v=>r.handleDragOver(v,u),onDrop:v=>r.handleDrop(v,u),onClick:v=>r.handleDropZoneClick(u)},d(s),43,Ze))),128))])]),e("div",$e,[(h(!0),m(P,null,x(o.availablePieces,(s,u)=>(h(),m("div",{key:u,class:S(["piece",{vowel:r.isVowel(s.text),dragging:o.draggingIndex===u,selected:o.selectedPiece===s.text&&!s.used,used:s.used}]),style:$({display:s.used?"none":"flex"}),draggable:!s.used,onDragstart:v=>r.handleDragStart(v,u),onDragend:t[0]||(t[0]=(...v)=>r.handleDragEnd&&r.handleDragEnd(...v)),onClick:v=>r.handlePieceClick(s.text,u)},d(s.text),47,je))),128))]),e("div",Ee,[e("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>r.checkAnswer&&r.checkAnswer(...s))},"🎯 检查答案"),e("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...s)=>r.nextLevel&&r.nextLevel(...s))},"🎉 下一关"),e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...s)=>r.resetGame&&r.resetGame(...s))},"🔄 重新开始")])]),o.showSuccessAnimation?(h(),m("div",ze," 🎉 太棒了！ ")):N("",!0),e("div",Ue,[(h(!0),m(P,null,x(o.confettiList,s=>(h(),m("div",{key:s.id,class:"confetti",style:$(s.style)},null,4))),128))])])}const Re=H(Le,[["render",Fe],["__scopeId","data-v-4448c7db"]]),Je=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"game/index.md","filePath":"game/index.md","lastUpdated":1748489095000}'),Be={name:"game/index.md"},Ve=ae({...Be,setup(i){const t=ne(),n=oe(),o=(()=>{const s=new URL(window.location.href),u=new URLSearchParams(s.search);return{get:(v,y="")=>u.get(v)||y,getAll:()=>{const v={};return u.forEach((y,b)=>{v[b]=y}),v},has:v=>u.has(v),getArray:v=>u.getAll(v)}})(),r=g("");return r.value=o.get("type",""),console.log("location",window.location.href),console.log("route",n),console.log("router",t),console.log("所有URL参数:",o.getAll()),console.log("获取size参数:",o.get("type","")),console.log("检查是否有debug参数:",o.has("debug")),(s,u)=>(h(),m("div",null,[r.value=="shuerte"?(h(),B(xe,{key:0})):N("",!0),r.value=="pinyin"?(h(),B(Re,{key:1})):N("",!0)]))}});export{Je as __pageData,Ve as default};
