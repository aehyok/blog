import{_ as n,c as a,o as p,ag as l}from"./chunks/framework.ELrfyV9R.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"article/code/2022-12-28-linux-h.md","filePath":"article/code/2022-12-28-linux-h.md","lastUpdated":1757327568000}'),e={name:"article/code/2022-12-28-linux-h.md"};function i(c,s,t,o,r,m){return p(),a("div",null,s[0]||(s[0]=[l(`<h2 id="dotnet-启动dll文件" tabindex="-1">dotnet 启动dll文件 <a class="header-anchor" href="#dotnet-启动dll文件" aria-label="Permalink to &quot;dotnet 启动dll文件&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>dotnet SLMDEngine.Base.dll --urls http://locaohost:8000</span></span></code></pre></div><h2 id="mysql-查看进程" tabindex="-1">mysql 查看进程 <a class="header-anchor" href="#mysql-查看进程" aria-label="Permalink to &quot;mysql 查看进程&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>数字乡村2.0打包机器 139.9.1.176  /home/soft  把编译好的文件拷贝到响应的目录下  执行 sh build.sh 2.2.0.005</span></span>
<span class="line"><span>生成的RPM包路径 /usr/src/packages/RPMS/noarch</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>chmod -R 777 文件夹</span></span>
<span class="line"><span>chown -R root.root 文件夹</span></span>
<span class="line"><span></span></span>
<span class="line"><span>拷贝文件到其他服务器</span></span>
<span class="line"><span>scp ./x264.tar root@172.16.140.234:/home/soft</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>tcpdump -i lo -s 0 tcp and port 80 -w 001.pcap</span></span>
<span class="line"><span></span></span>
<span class="line"><span>curl模拟调用接口</span></span>
<span class="line"><span>curl -i -X GET http://url/bind/agentOnWork/v2?Sig=*******</span></span>
<span class="line"><span>curl -i -X POST -d &#39;{&quot;iptvAccount&quot;:&quot;lqm&quot;}&#39; http://114.55.108.222:10080/api/epg/auth/login</span></span>
<span class="line"><span>curl -i -X POST -H &#39;Accept:application/json&#39; -H &#39;Content-Type:application/json;charset=utf-8&#39; -H &#39;Authorization:XXXXXX&#39; -d &#39;{&quot;iptvAccount&quot;:&quot;lqm&quot;}&#39; http://114.55.108.222:10080/api/epg/auth/login</span></span>
<span class="line"><span></span></span>
<span class="line"><span>curl -i -X POST -d &#39;{}&#39; http://localhost:11043/api/common/sl/GetQueryToken?userName=hh&amp;code=4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>find . | xargs grep -ril &quot;hocto.utuapp.cn&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>iptables -A INPUT -s 172.16.121.25 -p tcp -j ACCEPT</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>120.25.57.223     2288     root       iastestserver2018</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>redis-cli -h 192.168.0.42 -p 3719 -a &#39;sunlight2010&#39; -c </span></span>
<span class="line"><span></span></span>
<span class="line"><span>auth sunlight2010</span></span>
<span class="line"><span></span></span>
<span class="line"><span>select 0 </span></span>
<span class="line"><span>keys *</span></span>
<span class="line"><span></span></span>
<span class="line"><span>集群信息cluster info    节点信息cluster nodes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql -hlocalhost -P 3307 -uroot -psunlight2021</span></span>
<span class="line"><span></span></span>
<span class="line"><span>select column_name, column_comment from information_schema.columns where  table_name = &#39;picture&#39; ;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>desc picture;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql -h10.0.18.61 -uroot -psunlight@2020</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql -h10.0.0.1 -uroot -p123 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql -h139.9.184.171 -uroot -psunlight2021</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql -h192.168.88.158 -psunlight2010</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo 10.25.0.10:2719/nc -u nc -p nc</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo 127.0.0.1:27017/ips -u ips -p ips</span></span>
<span class="line"><span></span></span>
<span class="line"><span>show collections</span></span>
<span class="line"><span></span></span>
<span class="line"><span>db.XXXX.find({})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看集群状态</span></span>
<span class="line"><span>mongo 172.31.3.185:3718/admin</span></span>
<span class="line"><span>use admin</span></span>
<span class="line"><span>db.auth(&#39;root&#39;,&quot;OpenLab2021&quot;)</span></span>
<span class="line"><span>rs.status()</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>SIT1 环境连接  mongo &quot;mongodb://ips:ips@localhost:2718/ips&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>两种连接方式：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo &quot;mongodb://ucms:uc123_(ms@172.17.0.10:23000,172.17.0.13:23000,172.17.0.14:23000/ucms&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo -u test -p test --host 127.0.0.1 --port 27017        //适用于mongo版本4.x以下 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo -u username -p password --host 127.0.0.1 --port 27017</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongo 127.0.0.1:27017/fastgpt -u username -p password            //适用于mongo版本4.x以上</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MONGO_DB=mongodb://nc:nc@10.25.0.10:2718,10.25.0.10:2719/nc?replicaSet=NC</span></span>
<span class="line"><span>ucms:&#39;uc123_(ms&#39;@172.17.0.10,172.17.0.13,172.17.0.14:23000/ucms?replicaSet=ucms</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MONGO_DB=mongodb://nc:nc@10.25.0.10:2718/nc</span></span>
<span class="line"><span>REDIS_PREFIX=nc_dev_</span></span>
<span class="line"><span>IMAGE_SERVER=http://114.55.108.222:10080</span></span>
<span class="line"><span>REDIS_DB=[{&quot;host&quot;:&quot;localhost&quot;,&quot;port&quot;:6379}]</span></span>
<span class="line"><span>NETWORK_OPERATOR=gddx</span></span>
<span class="line"><span>UPLOAD_KEY=3754ez6iz7mx9jlswtal101bp6b7a4sb</span></span>
<span class="line"><span>CMS_ADDRESS=https://114.55.108.245:10080</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>find . | xargs grep -ril &quot;hocto.utuapp.cn&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>linux上安装.net core sdk 2.2（离线安装和yum仓库安装）</span></span>
<span class="line"><span>https://blog.csdn.net/u010476739/article/details/100144287?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~first_rank_v2~rank_v25-1-100144287.nonecase&amp;utm_term=linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85dotnet</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RPM包操作</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rpm -qa |grep epg 查询</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rpm -ivh xxx.rpm 安装</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rpm -e XXXX 卸载</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>apache</span></span>
<span class="line"><span></span></span>
<span class="line"><span>启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start httpd</span></span>
<span class="line"><span></span></span>
<span class="line"><span>停止</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl stop httpd</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl restart httpd</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mysql</span></span>
<span class="line"><span></span></span>
<span class="line"><span>启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start mysqld</span></span>
<span class="line"><span></span></span>
<span class="line"><span>停止</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl stop mysqld</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl restart mysqld</span></span>
<span class="line"><span></span></span>
<span class="line"><span>php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>停止</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl stop php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl restart php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl start nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>停止</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl stop nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl restart nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>下面看下centos7重启php-fpm命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/etc/init.d/php-fpm start</span></span>
<span class="line"><span>/etc/init.d/php-fpm stop</span></span>
<span class="line"><span>/etc/init.d/php-fpm restart</span></span>
<span class="line"><span>/etc/init.d/php-fpm reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall常用命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    1、重启、关闭、开启、firewalld.serverice 服务</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Service firewalld restart 重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Service firewalld start  开启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        Service firewalld stop  关闭</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        systemctl status firewalld</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        systemctl stop firewalld  关闭</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        systemctl start firewalld 开启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        systemctl  restart firewalld 重启</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        systemctl  disable firewalld  关闭开机启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl  disable nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl  enable nginx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    2、查看状态</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        firewall-cmd --state</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    3、查看防火墙规则</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        firewall-cmd --list-all</span></span>
<span class="line"><span></span></span>
<span class="line"><span> 添加</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --zone=public --add-port=80/tcp --permanent   （--permanent永久生效，没有此参数重启后失效）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重新载入</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --zone=public --query-port=80/tcp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>删除</span></span>
<span class="line"><span></span></span>
<span class="line"><span>firewall-cmd --zone=public --remove-port=80/tcp --permanent</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>systemctl list-unit-files |grep enabled           查看所有开机启动的服务</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>ps -ef | grep beanstalkd</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/usr/sbin/redis-server &amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service beanstalkd start</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看系统整体的负载</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：top</span></span>
<span class="line"><span></span></span>
<span class="line"><span>总体内存占用的查看</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：free</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看内存占用前五的进程</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：ps auxw | head -1;ps auxw|sort -rn -k4|head -5 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看CPU占用前三的进程</span></span>
<span class="line"><span></span></span>
<span class="line"><span>命令：ps auxw|head -1;ps auxw|sort -rn -k3|head -3</span></span>
<span class="line"><span></span></span>
<span class="line"><span>列出所有端口： netstat -ntlp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>netstat -anpt</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看 TCP 22 端口有两种方法</span></span>
<span class="line"><span>netstat -ntlp | grep 22</span></span>
<span class="line"><span></span></span>
<span class="line"><span>lsof -i tcp:22</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ps aux | grep mongod</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>php 中php-fpm 的重启、终止操作命令:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service nginx restart</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service php-fpm restart</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service mongod start  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>service redis start</span></span>
<span class="line"><span></span></span>
<span class="line"><span>service beanstalkd start</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看php-fpm进程数：</span></span>
<span class="line"><span>ps aux | grep -c php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看运行内存</span></span>
<span class="line"><span>/usr/bin/php  -i | grep mem</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看php编译参数</span></span>
<span class="line"><span>/usr/bin/php  -i | grep Configure</span></span>
<span class="line"><span></span></span>
<span class="line"><span>重启php-fpm</span></span>
<span class="line"><span>/etc/init.d/php-fpm restart</span></span>
<span class="line"><span></span></span>
<span class="line"><span> </span></span>
<span class="line"><span></span></span>
<span class="line"><span>首先要找到php-fpm.conf配置文件，查看pid的配置路径(不是安装路径)，然后把下面对应的地方改掉才能正常执行。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@DO-SG-H1 ~]# ps aux | grep php-fpm   </span></span>
<span class="line"><span>root     11799  0.0  0.0 103248   880 pts/0    S+   13:51   0:00 grep --color php-fpm</span></span>
<span class="line"><span>root     11973  0.0  0.0 417748   964 ?        Ss   Jun01   0:20 php-fpm: master process (/usr/local/php/etc/php-fpm.conf)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cat /etc/php-fpm.conf</span></span>
<span class="line"><span>看到</span></span>
<span class="line"><span>pid = /var/run/php-fpm/php-fpm.pid</span></span>
<span class="line"><span></span></span>
<span class="line"><span>php-fpm配置测试</span></span>
<span class="line"><span>/usr/local/php/sbin/php-fpm -t</span></span>
<span class="line"><span>/usr/local/php/sbin/php-fpm -c /usr/local/php/etc/php.ini -y /usr/local/php/etc/php-fpm.conf -t</span></span>
<span class="line"><span></span></span>
<span class="line"><span>php-fpm 启动：</span></span>
<span class="line"><span>/usr/local/php/sbin/php-fpm</span></span>
<span class="line"><span>/usr/local/php/sbin/php-fpm -c /usr/local/php/etc/php.ini -y /usr/local/php/etc/php-fpm.conf</span></span>
<span class="line"><span>php-fpm 关闭：</span></span>
<span class="line"><span>kill -INT \`cat /var/run/php-fpm/php-fpm.pid\`</span></span>
<span class="line"><span>php-fpm 重启：</span></span>
<span class="line"><span>kill -USR2 \`cat /var/run/php-fpm/php-fpm.pid\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>查看php-fpm进程数：</span></span>
<span class="line"><span>ps aux | grep -c php-fpm</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>消息队列：</span></span>
<span class="line"><span>/usr/bin/beanstalkd -l 0.0.0.0 -p 11300 &amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>redis：</span></span>
<span class="line"><span>/usr/sbin/redis-server &amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>测试 /usr/bin/redis-server &amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>测试环境手工启动mongodb命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/usr/bin/mongod -dbpath /data/mongodb/ -logpath /data/log/mongodb/mongod.log -logappend -fork -port 27017</span></span>
<span class="line"><span></span></span>
<span class="line"><span>正式环境手工启动mongodb命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/usr/bin/mongod -dbpath /var/lib/mongo/ -logpath /var/log/mongodb/mongod.log -logappend -fork -port 27017</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongod --dbpath=/var/lib/mongo/  --port=27017  --fork --logpath=/var/log/mongodb/mongod.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongod --repair --dbpath /var/lib/mongo/ --repairpath /tmp/mongodb</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>mongod -port=27017 -storageEngine=mmapv1  -dbpath=/var/lib/mongo/ -logpath=/var/log/mongodb/mongod.log --logappend --journal --fork</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/home/git/.gitolite/conf/gitolite.conf  </span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>grep -rn &quot;{填写关键字}&quot; *</span></span>
<span class="line"><span>: 表示当前目录所有文件，也可以是某个文件名</span></span>
<span class="line"><span>-r 是递归查找</span></span>
<span class="line"><span>-n 是显示行号</span></span>
<span class="line"><span>-R 查找所有文件包含子目录</span></span>
<span class="line"><span>-i 忽略大小写</span></span>
<span class="line"><span>-l 只列出匹配的文件名</span></span>
<span class="line"><span>-L 列出不匹配的文件名</span></span>
<span class="line"><span>-w 只匹配整个单词，而不是字符串的一部分</span></span>
<span class="line"><span></span></span>
<span class="line"><span>grep -rn &quot;https://mt{s}.sea.utuapp.cn/220122/models/0001/{z}/{x}/{y}.png&quot; *</span></span></code></pre></div>`,4)]))}const h=n(e,[["render",i]]);export{u as __pageData,h as default};
